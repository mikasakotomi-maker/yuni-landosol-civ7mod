# 领袖选择覆盖层验证模组

## 简介

这是一个验证模组，用于测试重写 `swapLeaderInfo` 函数的可行性。当在领袖选择界面切换领袖时，会在3D模型区域显示一个随机变色的测试块。

## 功能

- 重写 `LeaderSelectPanel.swapLeaderInfo()` 方法
- 在每次切换领袖时，在 `.game-creator-leader-info-content` 容器中创建一个测试块
- 测试块每次切换领袖时会随机变色
- 测试块使用绝对定位，覆盖在3D模型区域上方

## 文件结构

```
领袖选择覆盖层验证/
├── leader-overlay-test.modinfo  # 模组配置文件
├── ui/
│   └── shell/
│       └── create-panels/
│           └── leader-overlay-test.js  # 核心实现文件
├── text/
│   └── en_us/
│       └── Text.xml  # 本地化文本
└── README.md  # 本文件
```

## 工作原理

1. **等待加载**：脚本会等待 `Controls` 对象和 `LeaderSelectPanel` 类加载完成
2. **重写方法**：通过原型链重写 `LeaderSelectPanel.prototype.swapLeaderInfo` 方法
3. **保存原始函数**：保存原始函数的引用，确保原有逻辑正常执行
4. **添加测试块**：在原始函数执行后，创建或更新测试块
5. **随机变色**：每次切换领袖时，测试块会随机改变颜色

## 使用方法

1. 将整个 `领袖选择覆盖层验证` 文件夹放入游戏的模组目录
2. 启动游戏，在模组管理界面启用此模组
3. 进入创建游戏界面，选择领袖
4. 切换不同的领袖，应该能看到测试块在3D模型区域随机变色

## 调试

打开浏览器开发者工具（F12），查看控制台输出：
- `领袖选择覆盖层验证：模组开始初始化`
- `领袖选择覆盖层验证：swapLeaderInfo 函数已重写`
- `领袖选择覆盖层验证：测试块已创建`（首次）
- `领袖选择覆盖层验证：测试块颜色已更新`（后续切换）

## 测试块样式

- 位置：绝对定位，居中显示在3D模型容器中
- 大小：200x200像素
- 颜色：每次切换领袖时随机生成
- 透明度：80%
- z-index：10000（确保显示在3D场景上方）
- 边框：4px白色实线边框，圆角10px

## 注意事项

- 测试块使用 `pointer-events: none`，不会阻挡鼠标事件
- 如果找不到容器元素，会在控制台输出警告信息
- 如果无法重写函数，会在控制台输出错误信息

## 后续改进

如果验证成功，可以：
- [ ] 将测试块替换为实际的领袖图片
- [ ] 添加图片路径配置
- [ ] 支持根据领袖ID显示不同的图片
- [ ] 优化图片大小和位置
- [ ] 添加响应式调整

